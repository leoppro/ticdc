<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: Dataflow Pages: 1 -->
<svg width="722pt" height="1393pt"
 viewBox="0.00 0.00 721.83 1393.40" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1389.4)">
<title>Dataflow</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1389.4 717.8329,-1389.4 717.8329,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_legends</title>
<polygon fill="#d3d3d3" stroke="#d3d3d3" points="8,-1077.6 8,-1337 186,-1337 186,-1077.6 8,-1077.6"/>
<text text-anchor="middle" x="97" y="-1324" font-family="Times,serif" font-size="10.00" fill="#000000">Legend</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_tikv</title>
<polygon fill="none" stroke="#d3d3d3" points="525,-1004.6 525,-1243.2 609,-1243.2 609,-1004.6 525,-1004.6"/>
<text text-anchor="middle" x="567" y="-1226.6" font-family="Times,serif" font-size="14.00" fill="#000000">TiKV</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_ticdc</title>
<polygon fill="none" stroke="#d3d3d3" points="194,-8 194,-1377.4 517,-1377.4 517,-8 194,-8"/>
<text text-anchor="middle" x="355.5" y="-1360.8" font-family="Times,serif" font-size="14.00" fill="#000000">TiCDC</text>
</g>
<g id="clust4" class="cluster">
<title>cluster_kvclient</title>
<polygon fill="#d3d3d3" stroke="#d3d3d3" points="425,-1265 425,-1341.8 509,-1341.8 509,-1265 425,-1265"/>
<text text-anchor="middle" x="467" y="-1325.2" font-family="Times,serif" font-size="14.00" fill="#000000">KV client</text>
</g>
<g id="clust5" class="cluster">
<title>cluster_processor</title>
<polygon fill="#d3d3d3" stroke="#d3d3d3" points="202,-776.4 202,-853.2 438,-853.2 438,-776.4 202,-776.4"/>
<text text-anchor="middle" x="320" y="-836.6" font-family="Times,serif" font-size="14.00" fill="#000000">Processor</text>
</g>
<g id="clust6" class="cluster">
<title>cluster_puller</title>
<polygon fill="#d3d3d3" stroke="#d3d3d3" points="202,-926 202,-1344.6 382,-1344.6 382,-926 202,-926"/>
<text text-anchor="middle" x="292" y="-1328" font-family="Times,serif" font-size="14.00" fill="#000000">Puller</text>
</g>
<g id="clust7" class="cluster">
<title>cluster_sorter</title>
<polygon fill="#d3d3d3" stroke="#d3d3d3" points="365,-586 365,-703.6 463,-703.6 463,-586 365,-586"/>
<text text-anchor="middle" x="414" y="-687" font-family="Times,serif" font-size="14.00" fill="#000000">Sorter</text>
</g>
<g id="clust8" class="cluster">
<title>cluster_entry_sorter</title>
<polygon fill="#d3d3d3" stroke="#d3d3d3" points="373,-594 373,-670.8 455,-670.8 455,-594 373,-594"/>
<text text-anchor="middle" x="414" y="-654.2" font-family="Times,serif" font-size="14.00" fill="#000000">Entry sorter</text>
</g>
<g id="clust9" class="cluster">
<title>cluster_mounter</title>
<polygon fill="#d3d3d3" stroke="#d3d3d3" points="278,-594 278,-670.8 348,-670.8 348,-594 278,-594"/>
<text text-anchor="middle" x="313" y="-654.2" font-family="Times,serif" font-size="14.00" fill="#000000">Mounter</text>
</g>
<g id="clust10" class="cluster">
<title>cluster_sink</title>
<polygon fill="#d3d3d3" stroke="#d3d3d3" points="218,-16 218,-515.2 329,-515.2 329,-16 218,-16"/>
<text text-anchor="middle" x="273.5" y="-498.6" font-family="Times,serif" font-size="14.00" fill="#000000">Sink Manager</text>
</g>
<!-- flow -->
<g id="node1" class="node">
<title>flow</title>
<polygon fill="#ffffff" stroke="#ffffff" points="177.5464,-1309 106.4536,-1309 106.4536,-1273 177.5464,-1273 177.5464,-1309"/>
<text text-anchor="middle" x="142" y="-1288" font-family="Times,serif" font-size="10.00" fill="#000000">Go routine #1</text>
</g>
<!-- flow_ -->
<g id="node2" class="node">
<title>flow_</title>
<polygon fill="#ffffff" stroke="#ffffff" points="177.5464,-1121.6 106.4536,-1121.6 106.4536,-1085.6 177.5464,-1085.6 177.5464,-1121.6"/>
<text text-anchor="middle" x="142" y="-1100.6" font-family="Times,serif" font-size="10.00" fill="#000000">Go routine #2</text>
</g>
<!-- flow&#45;&gt;flow_ -->
<g id="edge1" class="edge">
<title>flow&#45;&gt;flow_</title>
<path fill="none" stroke="#000000" d="M142,-1272.6901C142,-1239.8582 142,-1170.7745 142,-1131.8363"/>
<polygon fill="#000000" stroke="#000000" points="145.5001,-1131.7083 142,-1121.7083 138.5001,-1131.7084 145.5001,-1131.7083"/>
<text text-anchor="middle" x="124.228" y="-1136.7083" font-family="Times,serif" font-size="10.00" fill="#000000">Flow</text>
<text text-anchor="middle" x="124.228" y="-1124.7083" font-family="Times,serif" font-size="10.00" fill="#000000">direction</text>
<text text-anchor="middle" x="125.337" y="-1263.6901" font-family="Times,serif" font-size="10.00" fill="#000000">Channel</text>
<text text-anchor="middle" x="125.337" y="-1251.6901" font-family="Times,serif" font-size="10.00" fill="#000000">/Buffer</text>
</g>
<!-- wait -->
<g id="node3" class="node">
<title>wait</title>
<polygon fill="#ffffff" stroke="#ffffff" points="87.5464,-1309 16.4536,-1309 16.4536,-1273 87.5464,-1273 87.5464,-1309"/>
<text text-anchor="middle" x="52" y="-1288" font-family="Times,serif" font-size="10.00" fill="#000000">Go routine #1</text>
</g>
<!-- wait_ -->
<g id="node4" class="node">
<title>wait_</title>
<polygon fill="#ffffff" stroke="#ffffff" points="87.5464,-1121.6 16.4536,-1121.6 16.4536,-1085.6 87.5464,-1085.6 87.5464,-1121.6"/>
<text text-anchor="middle" x="52" y="-1100.6" font-family="Times,serif" font-size="10.00" fill="#000000">Go routine #2</text>
</g>
<!-- wait&#45;&gt;wait_ -->
<g id="edge2" class="edge">
<title>wait&#45;&gt;wait_</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M52,-1272.6901C52,-1239.8582 52,-1170.7745 52,-1131.8363"/>
<polygon fill="#000000" stroke="#000000" points="55.5001,-1131.7083 52,-1121.7083 48.5001,-1131.7084 55.5001,-1131.7083"/>
<text text-anchor="middle" x="28.9475" y="-1263.6901" font-family="Times,serif" font-size="10.00" fill="#000000">#1 wiats #2</text>
</g>
<!-- Raftstore -->
<g id="node5" class="node">
<title>Raftstore</title>
<polygon fill="#d3d3d3" stroke="#d3d3d3" points="600.8135,-1210.4 533.1865,-1210.4 533.1865,-1174.4 600.8135,-1174.4 600.8135,-1210.4"/>
<text text-anchor="middle" x="567" y="-1188.2" font-family="Times,serif" font-size="14.00" fill="#000000">Raftstore</text>
</g>
<!-- CDC -->
<g id="node6" class="node">
<title>CDC</title>
<polygon fill="#d3d3d3" stroke="#d3d3d3" points="587,-1048.6 533,-1048.6 533,-1012.6 587,-1012.6 587,-1048.6"/>
<text text-anchor="middle" x="560" y="-1026.4" font-family="Times,serif" font-size="14.00" fill="#000000">CDC</text>
</g>
<!-- Raftstore&#45;&gt;CDC -->
<g id="edge3" class="edge">
<title>Raftstore&#45;&gt;CDC</title>
<path fill="none" stroke="#000000" d="M566.2106,-1174.154C565.0028,-1146.2351 562.6851,-1092.6651 561.248,-1059.4464"/>
<polygon fill="#000000" stroke="#000000" points="564.7263,-1058.8669 560.7972,-1049.0276 557.7328,-1059.1695 564.7263,-1058.8669"/>
<text text-anchor="middle" x="584.7672" y="-1099.4" font-family="Times,serif" font-size="14.00" fill="#000000">channel</text>
</g>
<!-- kv_client -->
<g id="node7" class="node">
<title>kv_client</title>
<polygon fill="#ffffff" stroke="#ffffff" points="501.1011,-1309 432.8989,-1309 432.8989,-1273 501.1011,-1273 501.1011,-1309"/>
<text text-anchor="middle" x="467" y="-1286.8" font-family="Times,serif" font-size="14.00" fill="#000000">kv_client</text>
</g>
<!-- CDC&#45;&gt;kv_client -->
<g id="edge4" class="edge">
<title>CDC&#45;&gt;kv_client</title>
<path fill="none" stroke="#000000" d="M553.4676,-1048.8906C537.4335,-1093.7861 496.0542,-1209.6483 476.9442,-1263.1563"/>
<polygon fill="#000000" stroke="#000000" points="473.6069,-1262.0946 473.5396,-1272.6892 480.1991,-1264.449 473.6069,-1262.0946"/>
<text text-anchor="middle" x="537.7279" y="-1143.8" font-family="Times,serif" font-size="14.00" fill="#000000">gRPC</text>
</g>
<!-- puller_run_step1 -->
<g id="node8" class="node">
<title>puller_run_step1</title>
<polygon fill="#ffffff" stroke="#ffffff" points="361.6716,-1311.6019 210.3284,-1311.6019 210.3284,-1270.3981 361.6716,-1270.3981 361.6716,-1311.6019"/>
<text text-anchor="middle" x="286" y="-1295.2" font-family="Times,serif" font-size="14.00" fill="#000000">Run #1</text>
<text text-anchor="middle" x="286" y="-1278.4" font-family="Times,serif" font-size="14.00" fill="#000000">(Add to memory buffer)</text>
</g>
<!-- kv_client&#45;&gt;puller_run_step1 -->
<g id="edge5" class="edge">
<title>kv_client&#45;&gt;puller_run_step1</title>
<path fill="none" stroke="#000000" d="M432.4825,-1291C415.1645,-1291 393.3422,-1291 371.8685,-1291"/>
<polygon fill="#000000" stroke="#000000" points="371.7116,-1287.5001 361.7116,-1291 371.7115,-1294.5001 371.7116,-1287.5001"/>
<text text-anchor="middle" x="397.3926" y="-1298.2" font-family="Times,serif" font-size="14.00" fill="#000000">eventCh</text>
</g>
<!-- puller_run_step2 -->
<g id="node12" class="node">
<title>puller_run_step2</title>
<polygon fill="#ffffff" stroke="#ffffff" points="374.4152,-975.4019 209.5848,-975.4019 209.5848,-934.1981 374.4152,-934.1981 374.4152,-975.4019"/>
<text text-anchor="middle" x="292" y="-959" font-family="Times,serif" font-size="14.00" fill="#000000">Run #2</text>
<text text-anchor="middle" x="292" y="-942.2" font-family="Times,serif" font-size="14.00" fill="#000000">(Output to output channel)</text>
</g>
<!-- puller_run_step1&#45;&gt;puller_run_step2 -->
<g id="edge7" class="edge">
<title>puller_run_step1&#45;&gt;puller_run_step2</title>
<path fill="none" stroke="#000000" d="M286.999,-1270.2309C287.8717,-1250.2809 289,-1219.2878 289,-1192.4 289,-1192.4 289,-1192.4 289,-1030.6 289,-1015.9473 289.5666,-999.7138 290.2074,-986.0411"/>
<polygon fill="#000000" stroke="#000000" points="293.7205,-985.8674 290.7277,-975.704 286.7293,-985.5154 293.7205,-985.8674"/>
<text text-anchor="middle" x="311.7395" y="-1099.4" font-family="Times,serif" font-size="14.00" fill="#000000">P.buffer</text>
</g>
<!-- processor_sorter_consume -->
<g id="node9" class="node">
<title>processor_sorter_consume</title>
<polygon fill="#ffffff" stroke="#ffffff" points="310.2577,-820.4 209.7423,-820.4 209.7423,-784.4 310.2577,-784.4 310.2577,-820.4"/>
<text text-anchor="middle" x="260" y="-798.2" font-family="Times,serif" font-size="14.00" fill="#000000">sorterConsume</text>
</g>
<!-- table_sink_run -->
<g id="node11" class="node">
<title>table_sink_run</title>
<polygon fill="#ffffff" stroke="#ffffff" points="311.7205,-482.2019 226.2795,-482.2019 226.2795,-440.9981 311.7205,-440.9981 311.7205,-482.2019"/>
<text text-anchor="middle" x="269" y="-465.8" font-family="Times,serif" font-size="14.00" fill="#000000">Table Sink</text>
<text text-anchor="middle" x="269" y="-449" font-family="Times,serif" font-size="14.00" fill="#000000">FlushEvents</text>
</g>
<!-- processor_sorter_consume&#45;&gt;table_sink_run -->
<g id="edge6" class="edge">
<title>processor_sorter_consume&#45;&gt;table_sink_run</title>
<path fill="none" stroke="#000000" d="M241.4138,-784.1919C231.3689,-772.381 221,-756.058 221,-739 221,-739 221,-739 221,-550.6 221,-528.6243 232.477,-506.8598 244.2069,-490.3544"/>
<polygon fill="#000000" stroke="#000000" points="247.1015,-492.3284 250.3045,-482.2293 241.5027,-488.1267 247.1015,-492.3284"/>
<text text-anchor="middle" x="244.5319" y="-615.8" font-family="Times,serif" font-size="14.00" fill="#000000">P.output</text>
</g>
<!-- mounter_run -->
<g id="node14" class="node">
<title>mounter_run</title>
<polygon fill="#ffffff" stroke="#ffffff" points="340,-638 286,-638 286,-602 340,-602 340,-638"/>
<text text-anchor="middle" x="313" y="-615.8" font-family="Times,serif" font-size="14.00" fill="#000000">Run</text>
</g>
<!-- processor_sorter_consume&#45;&gt;mounter_run -->
<g id="edge11" class="edge">
<title>processor_sorter_consume&#45;&gt;mounter_run</title>
<path fill="none" stroke="#000000" d="M262.253,-784.206C264.2833,-769.574 267.6919,-748.5664 272.5042,-730.6 280.2576,-701.6529 292.4055,-669.6018 301.3753,-647.4876"/>
<polygon fill="#000000" stroke="#000000" points="304.6804,-648.6528 305.2457,-638.0731 298.2062,-645.9911 304.6804,-648.6528"/>
<text text-anchor="middle" x="295.7479" y="-734.8" font-family="Times,serif" font-size="14.00" fill="#000000">M.Input</text>
</g>
<!-- processor_puller_consume -->
<g id="node10" class="node">
<title>processor_puller_consume</title>
<polygon fill="#ffffff" stroke="#ffffff" points="429.5438,-820.4 328.4562,-820.4 328.4562,-784.4 429.5438,-784.4 429.5438,-820.4"/>
<text text-anchor="middle" x="379" y="-798.2" font-family="Times,serif" font-size="14.00" fill="#000000">pullerConsume</text>
</g>
<!-- sorter_run -->
<g id="node13" class="node">
<title>sorter_run</title>
<polygon fill="#ffffff" stroke="#ffffff" points="441,-638 387,-638 387,-602 441,-602 441,-638"/>
<text text-anchor="middle" x="414" y="-615.8" font-family="Times,serif" font-size="14.00" fill="#000000">Run</text>
</g>
<!-- processor_puller_consume&#45;&gt;sorter_run -->
<g id="edge9" class="edge">
<title>processor_puller_consume&#45;&gt;sorter_run</title>
<path fill="none" stroke="#000000" d="M382.718,-784.0768C384.874,-773.3857 387.624,-759.6357 390,-747.4 396.6367,-713.2227 404.0158,-673.8328 408.8169,-648.0084"/>
<polygon fill="#000000" stroke="#000000" points="412.2618,-648.6268 410.6458,-638.1559 405.3794,-647.3491 412.2618,-648.6268"/>
<text text-anchor="middle" x="426.6315" y="-734.8" font-family="Times,serif" font-size="14.00" fill="#000000">E.AddEntry</text>
</g>
<!-- buffer_sink_run -->
<g id="node15" class="node">
<title>buffer_sink_run</title>
<polygon fill="#ffffff" stroke="#ffffff" points="311.7205,-273.8019 226.2795,-273.8019 226.2795,-232.5981 311.7205,-232.5981 311.7205,-273.8019"/>
<text text-anchor="middle" x="269" y="-257.4" font-family="Times,serif" font-size="14.00" fill="#000000">Buffer Sink</text>
<text text-anchor="middle" x="269" y="-240.6" font-family="Times,serif" font-size="14.00" fill="#000000">FlushEvents</text>
</g>
<!-- table_sink_run&#45;&gt;buffer_sink_run -->
<g id="edge13" class="edge">
<title>table_sink_run&#45;&gt;buffer_sink_run</title>
<path fill="none" stroke="#000000" d="M255.3297,-440.91C249.4932,-430.1515 244,-416.5154 244,-403.3 244,-403.3 244,-403.3 244,-311.5 244,-301.7949 246.9625,-291.863 250.8479,-283.0105"/>
<polygon fill="#000000" stroke="#000000" points="254.0606,-284.4086 255.3297,-273.89 247.7781,-281.3214 254.0606,-284.4086"/>
<text text-anchor="middle" x="282.3047" y="-353.2" font-family="Times,serif" font-size="14.00" fill="#000000">S.EmitEvents</text>
</g>
<!-- puller_run_step2&#45;&gt;processor_puller_consume -->
<g id="edge8" class="edge">
<title>puller_run_step2&#45;&gt;processor_puller_consume</title>
<path fill="none" stroke="#000000" d="M303.9146,-933.929C319.3679,-906.8591 346.3595,-859.5771 363.4228,-829.6869"/>
<polygon fill="#000000" stroke="#000000" points="366.6686,-831.0608 368.5868,-820.6411 360.5894,-827.5904 366.6686,-831.0608"/>
<text text-anchor="middle" x="360.0852" y="-884.4" font-family="Times,serif" font-size="14.00" fill="#000000">P.Output</text>
</g>
<!-- sorter_run&#45;&gt;processor_sorter_consume -->
<g id="edge10" class="edge">
<title>sorter_run&#45;&gt;processor_sorter_consume</title>
<path fill="none" stroke="#000000" d="M401.9115,-638.0988C384.5791,-663.5433 351.0946,-710.8642 318,-747.4 308.7377,-757.6254 297.9217,-768.204 288.1558,-777.3191"/>
<polygon fill="#000000" stroke="#000000" points="285.5821,-774.9312 280.5986,-784.2808 290.3249,-780.0797 285.5821,-774.9312"/>
<text text-anchor="middle" x="356.1399" y="-734.8" font-family="Times,serif" font-size="14.00" fill="#000000">S.Ouput</text>
</g>
<!-- mounter_run&#45;&gt;table_sink_run -->
<g id="edge12" class="edge">
<title>mounter_run&#45;&gt;table_sink_run</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M305.2096,-591.9546C296.4835,-560.5406 282.5444,-510.3598 274.7515,-482.3055"/>
<polygon fill="#000000" stroke="#000000" points="301.9038,-593.1311 307.9526,-601.8295 308.6484,-591.2575 301.9038,-593.1311"/>
<text text-anchor="middle" x="338.959" y="-546.4" font-family="Times,serif" font-size="14.00" fill="#000000">wait unmarshal</text>
</g>
<!-- backend_sink_run -->
<g id="node16" class="node">
<title>backend_sink_run</title>
<polygon fill="#ffffff" stroke="#ffffff" points="320.1537,-65.4019 225.8463,-65.4019 225.8463,-24.1981 320.1537,-24.1981 320.1537,-65.4019"/>
<text text-anchor="middle" x="273" y="-49" font-family="Times,serif" font-size="14.00" fill="#000000">Backend Sink</text>
<text text-anchor="middle" x="273" y="-32.2" font-family="Times,serif" font-size="14.00" fill="#000000">FlushEvents</text>
</g>
<!-- buffer_sink_run&#45;&gt;backend_sink_run -->
<g id="edge14" class="edge">
<title>buffer_sink_run&#45;&gt;backend_sink_run</title>
<path fill="none" stroke="#000000" d="M255.3297,-232.51C249.4932,-221.7515 244,-208.1154 244,-194.9 244,-194.9 244,-194.9 244,-103.1 244,-93.1158 247.4517,-83.0815 251.9735,-74.22"/>
<polygon fill="#000000" stroke="#000000" points="255.0554,-75.8811 256.9732,-65.4613 248.9761,-72.4109 255.0554,-75.8811"/>
<text text-anchor="middle" x="282.3047" y="-144.8" font-family="Times,serif" font-size="14.00" fill="#000000">S.EmitEvents</text>
</g>
<!-- data_in -->
<g id="node17" class="node">
<title>data_in</title>
<ellipse fill="none" stroke="#000000" cx="567" cy="-1291" rx="39.3836" ry="18"/>
<text text-anchor="middle" x="567" y="-1286.8" font-family="Times,serif" font-size="14.00" fill="#000000">Data in</text>
</g>
<!-- data_in&#45;&gt;Raftstore -->
<g id="edge15" class="edge">
<title>data_in&#45;&gt;Raftstore</title>
<path fill="none" stroke="#000000" d="M567,-1272.9152C567,-1258.4126 567,-1237.7876 567,-1221.0435"/>
<polygon fill="#000000" stroke="#000000" points="570.5001,-1220.704 567,-1210.704 563.5001,-1220.7041 570.5001,-1220.704"/>
</g>
<!-- data_out -->
<g id="node18" class="node">
<title>data_out</title>
<ellipse fill="none" stroke="#000000" cx="669" cy="-1192.4" rx="44.0396" ry="18"/>
<text text-anchor="middle" x="669" y="-1188.2" font-family="Times,serif" font-size="14.00" fill="#000000">Data out</text>
</g>
<!-- sink_run -->
<g id="node19" class="node">
<title>sink_run</title>
<ellipse fill="none" stroke="#000000" cx="669" cy="-1291" rx="44.6665" ry="18"/>
<text text-anchor="middle" x="669" y="-1286.8" font-family="Times,serif" font-size="14.00" fill="#000000">sink_run</text>
</g>
<!-- sink_run&#45;&gt;data_out -->
<g id="edge16" class="edge">
<title>sink_run&#45;&gt;data_out</title>
<path fill="none" stroke="#000000" d="M669,-1272.9152C669,-1258.4126 669,-1237.7876 669,-1221.0435"/>
<polygon fill="#000000" stroke="#000000" points="672.5001,-1220.704 669,-1210.704 665.5001,-1220.7041 672.5001,-1220.704"/>
</g>
</g>
</svg>
